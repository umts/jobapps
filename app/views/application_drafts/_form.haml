%h1 Editing #{@draft.position.name_and_department}
.container-fluid
  .row
    .col-9
      = form_for draft, url: draft_path(:draft) do |f|
        .row.header-row
          .col-5
            Prompt
          .col-4
            Response type
          .col-3
            Required?
        = f.fields_for :questions do |g|
          = render partial: 'cloneable_field', locals: {g: g}
        .form-group
          = f.label :email, 'Reply-to email:'
          = f.text_field :email, class: 'form-control'
        .form-group
          = f.submit 'Save changes and continue editing', class: 'btn btn-primary'
          = f.submit 'Preview changes', class: 'btn btn-primary'
    .col-3
      .row.header-row
      - @draft.questions.each do |question|
        .row.field-row
          - unless question.new_record?
            - unless @draft.questions.index(question).zero?
              = button_to 'Move up',
                move_question_draft_path(@draft, number: question.number, direction: :up),
                class: 'btn btn-secondary mb-1'
            - unless question == @draft.questions.not_new.last
              = button_to 'Move down',
                move_question_draft_path(@draft, number: question.number, direction: :down),
                class: 'btn btn-secondary mb-1'
            = button_to 'Remove question',
              remove_question_draft_path(@draft, number: question.number),
              class: 'btn btn-secondary mb-1'
